<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>Do script ao pacote de R</title>
    <meta charset="utf-8" />
    <meta name="author" content="Andrea S√°nchez-Tapia   N√∫cleo de Computa√ß√£o Cient√≠fica e Geoprocessamento   Jardim Bot√¢nico do Rio de Janeiro" />
    <script src="libs/header-attrs/header-attrs.js"></script>
    <link href="libs/font-awesome/css/fontawesome-all.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="xaringan-themer.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

# Do <em>script</em> ao pacote de R
## um exemplo desde a biologia
### Andrea S√°nchez-Tapia <br> N√∫cleo de Computa√ß√£o Cient√≠fica e Geoprocessamento <br> Jardim Bot√¢nico do Rio de Janeiro
### R-Ladies Rio de Janeiro

---

class: inverse, middle, center
background-image: url("figs/chevron.png")
background-position: 98% 2%
background-size: 150px

# Do _script_ ao pacote de R
## um exemplo desde a biologia
### Andrea S√°nchez-Tapia &lt;br&gt; N√∫cleo de Computa√ß√£o Cient√≠fica e Geoprocessamento &lt;br&gt; Jardim Bot√¢nico do Rio de Janeiro
### R-Ladies Rio de Janeiro




---
background-image: url("figs/chevron.png")
background-position: 98% 2%
background-size: 150px


### Apresenta√ß√£o


+ Bi√≥loga - Universidade Nacional da Col√¥mbia  
+ Mestre em Ecologia - UFRJ
+ Doutora em Bot√¢nica - JBRJ
+ .purple[P√≥s-doc - N√∫cleo de Computa√ß√£o Cient√≠fica e Geoprocessamento do JBRJ]

Ecologia de comunidades vegetais, restaura√ß√£o ecol√≥gica, ecologia quantitativa  

__Inform√°tica da biodiversidade__, modelagem de nicho ecol√≥gico

__Ci√™ncia aberta e reprodut√≠vel__, √©tica na ci√™ncia de dados, ci√™ncia de dados feminista

--


&lt;img src="./figs/df.jpg" width="100" /&gt;

Catherine D'Ignazio &amp; Lauren Klein [http://datafeminism.io/](http://datafeminism.io/)



---
background-image: url("figs/chevron.png")
background-position: 98% 2%
background-size: 150px

### Apresenta√ß√£o

+ Como trabalhar apenas com software _libre_? 

+ Usu√°ria de `R` desde 2009

+ .purple[R-Ladies Rio de Janeiro] desde 2017

+ __O alvo hoje__: Executar e ensinar a fazer projetos de an√°lise reprodut√≠veis. Desde o _download_ e processamento de dados at√© produzir o manuscrito, relat√≥rio ou apresenta√ß√£o (__rmarkdown__, __knitr__)

 &lt;!-- + Co-fundadora .red[__¬°liibre!__] com Sara Mortara: laborat√≥rio de inform√°tica da biodiversidade e reprodutibilidade em ecologia --&gt; 
---
class: center, middle
background-image: url("figs/chevron.png")
background-position: 98% 2%
background-size: 150px




.pull-left[
### Curso _Projetos de an√°lise de dados usando R_

&lt;img src="./figs/turma.JPG" width="300" /&gt;


&lt;img src="./figs/logo_jbrj.png" width="100" /&gt;

__Sara Mortara__ (R-Ladies Rio de Janeiro)
]


.pull-right[
&lt;br&gt;
&lt;br&gt;
&lt;br&gt;
&lt;br&gt;
&lt;br&gt;
__Boas pr√°ticas__ em an√°lise de dados

&lt;img src="./figs/rstudio.jpg" width="200" /&gt;

&lt;img src="./figs/logo-git.png" width="80" /&gt;&lt;img src="./figs/GitHub_Logo.png" width="80" /&gt;&lt;img src="./figs/btibucket.png" width="80" /&gt;&lt;img src="./figs/gitlab-logo-gray-rgb.png" width="80" /&gt;

&lt;img src="./figs/latex.jpeg" width="100" /&gt;&lt;img src="./figs/bibtex.jpeg" width="100" /&gt;&lt;img src="./figs/zotero.svg" width="100" /&gt;
&lt;img src="./figs/rmarkdown.png" width="50" /&gt;

&lt;img src="./figs/xaringan.png" width="60" /&gt;
]


 &lt;!-- pensada como semin√°rio
 alunes de v√°rias √°reas do conhecimento
 ferramentas que n√£o t√™m um ensino formal
 de grande utilidade --&gt; 

---
background-image: url("figs/chevron.png")
background-position: 98% 2%
background-size: 150px

### Por que pensar em pacotes?

+ Filosofia de R: transi√ß√£o de usu√°rie a programadore

--

+ Filosofia da __R Foundation__ e de __R Forwards__: mais ra√ßas, g√™neros, pa√≠ses, l√≠nguas representados na comunidade de R ([useR! 2020 panel](https://www.youtube.com/watch?v=gDO1OphmF5Q&amp;t=18s))

--

+ √öteis para compartilhar grandes conjuntos de fun√ß√µes que t√™m um prop√≥sito similar

--

+ Grande experi√™ncia de aprendizado: portabilidade, transpar√™ncia, robusteza, comunica√ß√£o. 

--

#### Habilidades que vale muito a pena aprender _bem antes_ de chegar ao pacote


---
class: middle
background-image: url("figs/chevron.png")
background-position: 98% 2%
background-size: 150px

### Pacote de R para modelagem de nicho &lt;br&gt; ecol√≥gico: .red[modleR]

+ __Unificar__ diferentes partes do processo de MNE
+ Fornecer __metadados__ e __documentar__ decis√µes de parametriza√ß√£o
+ Se __integrar__ ao resto de ferramentas que existem no ambiente de `R`

&lt;br&gt;
&lt;img src="./figs/mm.png" width="151" /&gt;
&lt;img src="./figs/coleguinhes.png" width="600" /&gt;

&lt;small&gt;
Marinez F Siqueira, Sara Mortara, Diogo Rocha, Guilherme Gall, Felipe Sodr√©
&lt;/small&gt;

.pull-left[

<i class="fab  fa-firefox "></i> 
&lt;small&gt;
[https://model-r.github.io/modleR/](https://model-r.github.io/modleR/)
&lt;/small&gt;
]

.pull-right[
&lt;p style="text-align:center;"&gt;

<i class="fab  fa-youtube "></i> 

&lt;small&gt;
&lt;a href="https://www.youtube.com/watch?v=4Xw33TdIVXA"&gt;Aula no curso ENM-2020&lt;/a&gt;

&lt;/small&gt;
&lt;/p&gt;

]

---
class: bottom, center
background-image: url("figs/modleR.png")
background-position: 50% 0%
background-size: 800px

&lt;img src="./figs/preprint.png" width="800" /&gt;


---
background-image: url("figs/chevron.png")
background-position: 98% 2%
background-size: 150px

### Modelos de nicho ecol√≥gico ou de &lt;br&gt; distribui√ß√£o das esp√©cies (ENM, SDM)

+ Dados de ocorr√™ncia das esp√©cies: __objetos espaciais__, bases de dados, limpeza de dados.

+ Camadas preditoras ambientais ( __rasters__ de SIG)  Pacotes __`raster`__, __`sp`__, __`maps`__, __`rgdal`__: (taskview Spatial)

+ Abordagem de aprendizado estat√≠stico 

+ Diferentes algoritmos
 
+ __Infer√™ncia de √°reas adequadas para a ocorr√™ncia das esp√©cies__

---
background-image: url("figs/chevron.png")
background-position: 98% 2%
background-size: 150px

### A hist√≥ria

#### O trabalho: gerar uma camada de diversidade potencial de plantas &lt;br&gt; da Mata Atl√¢ntica

+ A "maior" quantidade poss√≠vel de esp√©cies
+ Muito controle sobre a qualidade dos dados e dos modelos
+ Corre√ß√£o taxon√¥mica, limpeza dos registros
+ Alta resolu√ß√£o (30s ~1km) 

--

#### O fluxo de trabalho: cada esp√©cie precisa passar por v√°rias etapas

+ Obten√ß√£o, __limpeza__ de dados
+ Desenho experimental, __prepara√ß√£o__ dos dados
+ Ajustar os __modelos__, __projetar__ os modelos para v√°rios algoritmos
+ Juntar os resultados dos diferentes algoritmos
+ Juntar o resultado para v√°rias esp√©cies

---
class: inverse, middle, center
background-image: url("figs/chevron.png")
background-position: 98% 2%
background-size: 150px

### A gente j√° conhecia algumas boas pr√°ticas

---
background-image: url("figs/chevron.png")
background-position: 98% 2%
background-size: 150px

### Boas pr√°ticas ‚ù§Ô∏è &lt;br&gt; estrutura de pastas e pasta de trabalho 

+ ___Meetup_ anterior!__  <i class="fab  fa-youtube "></i>[Apresenta√ß√£o](https://www.youtube.com/watch?v=4nfIbiS1Huw&amp;t=1583s) e  <i class="fab  fa-github "></i> [Tutorial](https://github.com/saramortara/R-git-tutorial)

--

+ N√£o use `setwd()`! üî•

--

+ N√£o mude de pasta de trabalho ao longo do projeto: use __caminhos relativos__

--
    
  + Caminhos absolutos: `"C://Eu/Minha_pasta/arquivo_meu_v_13.csv"`

--

  + Caminhos relativos: `"./data"`, `"./figs"`
  
--

+ Cuide da estrutura de pastas

---
background-image: url("figs/chevron.png")
background-position: 98% 2%
background-size: 150px
class: inverse, middle, center

# Os scripts

---
background-image: url("figs/chevron.png")
background-position: 98% 2%
background-size: 150px

### Primeira etapa: _scripts_ soltos

+ Um script para __uma__ esp√©cie (fazia todas as etapas de vez)

--

+ Um `"for loop"` para fazer para v√°rias esp√©cies

--

```r
lista_de_especies &lt;- c("sp1", "sp2", "sp3")
```

--

```r
for (especie in lista_de_especies) { # pode ter qualquer nome, i
    todo_o_codigo(especie)
}
```

--

```r
especie &lt;- sp1
todo_o_codigo(sp1)

especie &lt;- sp2
todo_o_codigo(sp2)

especie &lt;- sp3
todo_o_codigo(sp3)
```


---
background-image: url('figs/hadley.jpg')
background-size: 150px
background-position: 90% 10%

### Criar fun√ß√µes


"Se voc√™ est√° copiando e colando seu c√≥digo mais   
de tr√™s vezes, √© hora de escrever uma fun√ß√£o"

`Hadley Wickham`

--


```r
modelar &lt;- function(x) {
    y &lt;- ...(x)
    return(y)
}

# Uma esp√©cie
modelar(especie)

# V√°rias esp√©cies
lapply(lista_de_especies, modelar)

purrr::map(lista_de_especies, 
           ~modelar)
```

--

#### A fun√ß√£o ainda rodava todas as etapas da an√°lise para cada esp√©cie!

---
background-image: url('figs/alltest_alphamap1.png')
background-position: 95% 50%
background-size: 45%
class: inverse

### Rodava!  
--

### Matava a RAM :/
--

### Demorava 10 dias ¬¨¬¨ 
--

### Fazia uma esp√©cie ap√≥s &lt;br&gt; a outra

--

&lt;img src="figs/felipe.png" width="70" /&gt;

Felipe Sodr√©


---
background-image: url('./figs/lncc.png')
background-size: 200px
background-position: 90% 10%

### Melhorando o desempenho

+ Capacidade de computa√ß√£o

--

+ Computa√ß√£o remota (VPN, ssh)

--

+ __Paraleliza√ß√£o__ 

--

+ __Modulariza√ß√£o__: Separar os quatro processos em fun√ß√µes diferentes

--

+ __Colabora√ß√£o__:

--
  
  + Cuidar do __estilo de c√≥digo__ 

--

  + __Come√ßar a usar controle de vers√µes__ (git/GitHub)

--

&lt;center&gt;

&lt;img src="./figs/math.gif" width="200" /&gt;

&lt;/center&gt;



---
### Paraleliza√ß√£o

+ Cada processo vai para um n√∫cleo do computador (_core_)

--

+ Os _clusters_ de computa√ß√£o podem ter v√°rias centenas de n√∫cleos

--

+ H√° v√°rias maneiras de paralelizar processos em R

--

```r
library(parallel)
library(snowfall)
library(foreach)
library(futures)
```

--


```r
sfInit(parallel = T, cpus = 3)
sfExportAll() # para que cada n√∫cleo receba as vari√°veis do workspace
sfLapply(lista_de_especies, modelar)
sfStop()
```

#### Passou de 10 dias para algumas horas ¬¨¬¨


---
background-image: url("figs/chevron.png")
background-position: 98% 2%
background-size: 150px

### __Modularizar__ o c√≥digo

+ Cada repeti√ß√£o ainda executava os quatro passos

--

+ E se a gente rodasse um processo por vez para todas as esp√©cies? 

--

__Antes__  
`{especie1 A, B, C, D} {especie 2 A, B, C, D} ...n`


--

__Depois__  
`{passo A sp1, sp2, sp3,...spn} {passo B sp1, sp2, sp3,...spn} {passo C sp1, sp2, sp3,...spn} {passo D sp1, sp2, sp3,...spn}`

--

+ Na hora de repetir n√£o precisava voltar at√© o in√≠cio

--

+ Quatro fun√ß√µes! N√£o UMA!


---
background-image: url("figs/chevron.png")
background-position: 98% 2%
background-size: 150px
### __Colabora√ß√£o__ e controle de vers√µes

--

&lt;img src="./figs/logo-git.png" width="200" /&gt;&lt;img src="./figs/GitHub_Logo.png" width="200" /&gt;

--

&lt;img src="./figs/btibucket.png" width="200" /&gt;&lt;img src="./figs/gitlab-logo-gray-rgb.png" width="200" /&gt;

--

+ __Os pacotes de R podem ser instalados diretamente desde GitHub!__

---
background-image: url("figs/chevron.png")
background-position: 98% 2%
background-size: 150px

### Git: baseado em __commits__

&lt;img src="./figs/snapshots.png" width="600" /&gt;

.footnote[
[https://git-scm.com/book/en/v2/Getting-Started-About-Version-Control](https://git-scm.com/book/en/v2/Getting-Started-About-Version-Control)
]

---
background-image: url("figs/chevron.png")
background-position: 98% 2%
background-size: 150px

### Git: modo diff

&lt;img src="figs/diff.png" width="600" /&gt;

.footnote[
[https://git-scm.com/book/en/v2/Getting-Started-Git-Basics](https://git-scm.com/book/en/v2/Getting-Started-Git-Basics)
]

---
background-image: url("figs/chevron.png")
background-position: 98% 2%
background-size: 150px

### Git: local e remoto

&lt;img src="figs/areas.png" width="600" /&gt;

.footnote[
[https://git-scm.com/book/en/v2/Getting-Started-Git-Basics](https://git-scm.com/book/en/v2/Getting-Started-Git-Basics)
]

---
background-image: url("figs/chevron.png")
background-position: 98% 2%
background-size: 150px
### We ‚ù§Ô∏è &lt;img src="figs/logo-git.png" width="70" /&gt;


+ Backup

--

+ Controle de vers√µes

--

+ Reprodutibilidade

--

+ Workflow colaborativo: __issues__ para perguntar e dar feedback, __Pull Requests__ para sugerir mudan√ßas

--

+ Transpar√™ncia

--

#### √â preciso padronizar o estilo de c√≥digo!*

---
background-image: url('figs/hadley.jpg')
background-size: 150px
background-position: 90% 10%

### Estilo de c√≥digo

"Um bom estilo de c√≥digo √© como usar uma boa pontua√ß√£o. &lt;br&gt;  Voc√™ pode viver sem ela mas sem d√∫vida facilita ler as coisas." 

Hadley Wickham


+ [Google's R style guide](https://google.github.io/styleguide/Rguide.html)
+ [tidyverse](https://style.tidyverse.org/)
+ [Advanced R](http://adv-r.had.co.nz/Style.html)

Independente do estilo, o que importa √© ser consistente!

`Ctrl+Shift+A` Reformata o c√≥digo automaticamente

pacote __formatR__ 


---
background-image: url("figs/rpackages.png")
background-size: 250px
background-position: 90% 50%

### A transforma√ß√£o em pacote

--

&lt;img src="figs/guilherme.png" width="90" /&gt;&lt;img src="figs/hadley.jpg" width="90" /&gt;


Guilherme Gall (LNCC) + Hadley Wickham 

--

+ Estrutura especial das pastas e arquivos especiais

--

+ Documenta√ß√£o espec√≠fica

--

+ Licen√ßa de uso

--

+ "Vignettes" e documenta√ß√£o adicional

--

+ Passar testes!

--

+ Publicar (Submiss√£o a CRAN? `#medo`)

--








---
### Estrutura de um pacote de R

```bash
.
‚îú‚îÄ‚îÄ R/           # Fun√ß√µes
‚îú‚îÄ‚îÄ man/         # Documenta√ß√£o
‚îú‚îÄ‚îÄ data/        # Dados
‚îú‚îÄ‚îÄ vignettes/   # Vignettes
‚îú‚îÄ‚îÄ inst/        # Os manuais que ficam quando voc√™ instala
‚îú‚îÄ‚îÄ .buildignore # Arquivos e pastas que n√£o ser√£o controlados
‚îú‚îÄ‚îÄ DESCRIPTION  # Descri√ß√£o do pacote
‚îú‚îÄ‚îÄ NAMESPACE    # NAMESPACE
‚îî‚îÄ‚îÄ README.md    # README
```

+ O pr√≥prio pacote pode ser criado usando as op√ß√µes de RStudio
+ O pacote __usethis__: `usethis::create_package()`
+ Alguns elementos s√£o obrigat√≥rios (DESCRIPTION, NAMESPACE, R/, man/)

---
### DESCRIPTION

```bash
.
‚îú‚îÄ‚îÄ R/           # Fun√ß√µes
‚îú‚îÄ‚îÄ man/         # Documenta√ß√£o
‚îú‚îÄ‚îÄ data/        # Dados
‚îú‚îÄ‚îÄ vignettes/   # Vignettes
‚îú‚îÄ‚îÄ inst/        # Relat√≥rios reprodut√≠veis a partir dos outputs
‚îú‚îÄ‚îÄ .buildignore # Arquivos e pastas que n√£o ser√£o controlados
*‚îú‚îÄ‚îÄ DESCRIPTION  # Descri√ß√£o do pacote
‚îú‚îÄ‚îÄ NAMESPACE    # NAMESPACE
‚îî‚îÄ‚îÄ README.md    # README
```

&lt;small&gt;
A DESCRIPTION do pacote √© editada a m√£o. 
```
Package: rladiesrio
Type: Package
Title: Isto √© um esqueleto de pacote de teste
Version: 0.1.0
Author: RLadies+ Rio de Janeiro
Maintainer: Andrea S√°nchez-Tapia &lt;andreasancheztapia@gmail.com&gt;
Description: Este esqueleto permite entender a estrutura de um pacote. 
License: MIT
Encoding: UTF-8
LazyData: true
RoxygenNote: 7.1.0
```
&lt;/small&gt;

---
### NAMESPACE

```bash
.
‚îú‚îÄ‚îÄ R/           # Fun√ß√µes
‚îú‚îÄ‚îÄ man/         # Documenta√ß√£o
‚îú‚îÄ‚îÄ data/        # Dados
‚îú‚îÄ‚îÄ vignettes/   # Vignettes
‚îú‚îÄ‚îÄ inst/        # Relat√≥rios reprodut√≠veis a partir dos outputs
‚îú‚îÄ‚îÄ .buildignore # Arquivos e pastas que n√£o ser√£o controlados
‚îú‚îÄ‚îÄ DESCRIPTION  # Descri√ß√£o do pacote
*‚îú‚îÄ‚îÄ NAMESPACE    # NAMESPACE
‚îî‚îÄ‚îÄ README.md    # README
```
O NAMESPACE indica quais fun√ß√µes ser√£o __importadas__ ou __exportadas__ pelo pacote

```
*# Generated by roxygen2: do not edit by hand

export(create_buffer)
export(do_any)
import(graphics)
import(raster)
importFrom(Rdpack,reprompt)
importFrom(dismo,randomPoints)
```

---
### R e data

```bash
.
*‚îú‚îÄ‚îÄ R/           # Fun√ß√µes
*‚îú‚îÄ‚îÄ man/         # Documenta√ß√£o
*‚îú‚îÄ‚îÄ data/        # Dados
‚îú‚îÄ‚îÄ vignettes/   # Vignettes
‚îú‚îÄ‚îÄ inst/        # Relat√≥rios reprodut√≠veis a partir dos outputs
‚îú‚îÄ‚îÄ .buildignore # Arquivos e pastas que n√£o ser√£o controlados
‚îú‚îÄ‚îÄ DESCRIPTION  # Descri√ß√£o do pacote
‚îú‚îÄ‚îÄ NAMESPACE    # NAMESPACE
‚îî‚îÄ‚îÄ README.md    # README
```

+ As __fun√ß√µes__ est√£o na pasta `R/`
+ A documenta√ß√£o das fun√ß√µes estar√° em `man/`
+ Os __dados__ estar√£o na pasta `data/` `(data(cars)`)


---
### __roxygen2__ e a documenta√ß√£o das fun√ß√µes

```bash
.
‚îú‚îÄ‚îÄ R/           # Fun√ß√µes
*‚îú‚îÄ‚îÄ man/         # Documenta√ß√£o
‚îú‚îÄ‚îÄ data/        # Dados
‚îú‚îÄ‚îÄ vignettes/   # Vignettes
‚îú‚îÄ‚îÄ inst/        # Relat√≥rios reprodut√≠veis a partir dos outputs
‚îú‚îÄ‚îÄ .buildignore # Arquivos e pastas que n√£o ser√£o controlados
‚îú‚îÄ‚îÄ .gitignore   # Arquivos e pastas que ser√£o ignorados por git
‚îú‚îÄ‚îÄ *.Rproj      # Projeto de RStudio
‚îú‚îÄ‚îÄ DESCRIPTION  # Descri√ß√£o do pacote
‚îú‚îÄ‚îÄ NAMESPACE    # NAMESPACE
‚îî‚îÄ‚îÄ README.md    # README
```

+ Antes era preciso escrever √† m√£o a documenta√ß√£o e o NAMESPACE
+ Hoje: as fun√ß√µes podem ser documentadas diretamente nos arquivos .R em R/ 
+ O pacote __roxygen2__ vai transformar esses coment√°rios em arquivos .Rd da documenta√ß√£o


---
### __roxygen2__ e a documenta√ß√£o das fun√ß√µes

```
#' Titulo da funcao
#'
#' descricao
#'
#' @param parametro1 descri√ß√£o do par√¢metro1
#' @param parametro2 descri√ß√£o do par√¢metro2
#' @Import pacote
#' @ImportFrom pacote funcao funcao funcao
#' @details
#' @returns um data.frame
*#' @export #para que entre no NAMESPACE
#' @examples
#' funcao &lt;- function(x) {
#' funfunfun
#' }

funcao &lt;- function(x) { ...
```
+ Op√ß√£o `code &gt; Insert Roxygen Skeleton` no menu de RStudio

--

+ Quando a documenta√ß√£o est√° escrita: `devtools::document()`

--

+ __roxygen2__ vai criar os arquivos em man/ e editar o NAMESPACE

---
### Outras formas de documenta√ß√£o: vignettes e README

```bash
.
‚îú‚îÄ‚îÄ R/           # Fun√ß√µes
‚îú‚îÄ‚îÄ man/         # Documenta√ß√£o
‚îú‚îÄ‚îÄ data/        # Dados
*‚îú‚îÄ‚îÄ vignettes/   # Vignettes
‚îú‚îÄ‚îÄ inst/        # Relat√≥rios reprodut√≠veis a partir dos outputs
‚îú‚îÄ‚îÄ .buildignore # Aqui tem que estar README.Rmd que √© um arquivo opcional
‚îú‚îÄ‚îÄ DESCRIPTION  # Descri√ß√£o do pacote
‚îú‚îÄ‚îÄ NAMESPACE    # NAMESPACE
*‚îú‚îÄ‚îÄ README.Rmd    # README em rmarkdown que √© knittado para criar o md
*‚îî‚îÄ‚îÄ README.md    # README
```

+ README e vignettes s√£o arquivos de __rmarkdown__ 

&lt;center&gt;

&lt;img src="./figs/rmarkdown.png" width="100" /&gt;

&lt;/center&gt;


---
### __.buildignore__ 

```bash
.
‚îú‚îÄ‚îÄ R/           # Fun√ß√µes
‚îú‚îÄ‚îÄ man/         # Documenta√ß√£o
‚îú‚îÄ‚îÄ data/        # Dados
‚îú‚îÄ‚îÄ vignettes/   # Vignettes
‚îú‚îÄ‚îÄ inst/        # Relat√≥rios reprodut√≠veis a partir dos outputs
*‚îú‚îÄ‚îÄ .buildignore # Aqui tem que estar README.Rmd que √© um arquivo opcional
‚îú‚îÄ‚îÄ DESCRIPTION  # Descri√ß√£o do pacote
‚îú‚îÄ‚îÄ NAMESPACE    # NAMESPACE
*‚îú‚îÄ‚îÄ README.Rmd    # README em rmarkdown que √© knittado para criar o md
‚îî‚îÄ‚îÄ README.md    # README
```

+ .buildignore √© um __arquivo de texto__ permite ignorar arquivos fora do padr√£o ou que ainda n√£o est√£o prontos

--

+ O ponto no in√≠cio do nome faz com que o navegador de arquivos n√£o veja: arquivo oculto

--

+ O navegador do .blue[RStudio] consegue ver! 

--

+ Editar: `README.Rmd`

---
background-image: url("figs/devtools.png")
background-position: 98% 2%
background-size: 150px


### Checando o pacote

+ __Durante o trabalho__: `devtools::load_all()` 

--

+ Quando o pacote foi terminado: hora dos checks de CRAN! `devtools::check()`

--

+ Vai devolver NOTAS, ADVERT√äNCIAS e ERROS 

--

+ Resolver um a um. Internet, paci√™ncia, caf√©. 

--

&lt;center&gt;
&lt;img src="figs/tests.png" width="300" /&gt;
&lt;/center&gt;


--

+ Pode mandar para GitHub e __o pacote pode ser instalado desde GitHub__

--

`remotes::install_github("Model-R/modleR", build_vignettes = TRUE)`

---
background-image: url("figs/chevron.png")
background-position: 98% 2%
background-size: 150px

### Outras ferramentas para seus pacotes

--

&lt;img src="figs/usethis.png" width="150" /&gt;&lt;img src="figs/testthat.png" width="150" /&gt;

--


+ __usethis__: permite criar pacotes, usar git, organizar desde o in√≠cio (__N√£o misture!__)

--

+ __testthat__: criar testes com expectativas formais


---
background-image: url("figs/pkgdown-logo.png")
background-position: 98% 2%
background-size: 150px
### Uma p√°gina para o seu pacote: __pkgdown__

&lt;img src="./figs/pkgdown.png" width="500" /&gt;

+ `pkgdown::build_site()` knittar em formato de p√°gina web e colocar em uma pasta __docs/__ do pacote

--

+ O reposit√≥rio de GitHub tem que estar configurado para fazer uma p√°gina a partir de __docs/__ 



+ O readme ou um index.md ser√£o a primeira p√°gina
+ A vignette principal ir√° em Get started
+ Vignettes adicionais __que n√£o est√£o no pacote__ devem ir em vignettes/articles e ir√£o na aba __Articles__


---
background-image: url("figs/chevron.png")
background-position: 98% 2%
background-size: 150px

### Do _script_ ao pacote

+ Procure __portabilidade__ e __reprodutibilidade__ em seus scripts

--

+ Separe os problemas em unidades menores: resolva UMA unidade e crie __loops__ e __fun√ß√µes__ para o resto

--

+ Invista em aprender __git__ e __rmarkdown__ 

---
background-image: url("figs/chevron.png")
background-position: 98% 2%
background-size: 150px

### Do _script_ ao pacote 

+ Vale a pena?

--

+ Colaborar com pacotes existentes?

--

+ Quantas fun√ß√µes, o que entra em cada fase? o que sai? Modularize

--

+ N√£o fa√ßa do zero: use __roxygen2__, __devtools__, __usethis__, __testthat__

--

+ Cuide da __documenta√ß√£o__ e crie __vignettes__ e exemplos  &lt;!-- (por defini√ß√£o eles ter√£o de ser reprodut√≠veis) --&gt; 

--

+ Divulgue seu trabalho .purplr[`#rstats`], .purple[`#rladies`]

--

+ Teste, cuide des usu√°ries e da comunidade ao redor do pacote ‚ù§Ô∏è

---
background-image: url("figs/antifa.PNG")
background-position: 98% 2%
background-size: 150px

### Pacotes de exemplo: __coronabr__ e __R-ladies antifa__

&lt;img src="./figs/coronabr.png" width="600" /&gt;

[https://github.com/liibre/rladies_antifa](https://github.com/liibre/rladies_antifa)

---
background-image: url("figs/chevron.png")
background-position: 98% 2%
background-size: 150px

class: center, bottom

# ¬°Obrigada!

<i class="fas  fa-paper-plane " style="color:#562457;"></i> [andreasancheztapia@gmail.com](mailto:andreasancheztapia@gmail.com) 

<i class="fab  fa-twitter " style="color:#562457;"></i> [@SanchezTapiaA](https://twitter.com/SanchezTapiaA) 

<i class="fab  fa-github " style="color:#562457;"></i> <i class="fab  fa-gitlab " style="color:#562457;"></i> <i class="fab  fa-bitbucket " style="color:#562457;"></i> [andreasancheztapia](http://github.com/andreasancheztapia) 

<i class="fab  fa-r-project " style="color:#562457;"></i> [R-Ladies+ Rio de Janeiro](https://www.meetup.com/pt-BR/rladies-rio/)


.pull-left[
&lt;img src="./figs/cnpq.png" width="150" /&gt;
&lt;img src="./figs/capes.png" width="120" /&gt;
]

.pull-right[
&lt;img src="./figs/consortium.png" width="150" /&gt;
]


    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": false
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
